{% load static %}
<!doctype html>
<html>
    <head>
        <title>Visiter System</title>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width" />
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
        <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
        <link href="//fonts.googleapis.com/css?family=Lobster&subset=latin,latin-ext" rel="stylesheet" type="text/css">
        <link rel="stylesheet" href="{% static 'css/design_Guest.css' %}">
        <!--fontawesomeの機能を利用するために使用-->
        <script src="https://kit.fontawesome.com/e050036233.js" crossorigin="anonymous"></script>
    </head>
    <body>
      <header class="two">
      </header>

      <!--ビデオチャットを表示する機能-->
      <div id="videoChat" style="text-align:center;">
        <!--<div style="visibility:hidden;">
        </div>-->
        <div class="video-container">
          <p class="overlay_mes" id="joining"></p>
          <div class="overlay"></div>
          <video id="local-video" muted playsinline  style="text-align:center;-webkit-transform: scaleX(-1);"></video>
        </div>

        <video id="partner_video"></video>
        <audio id="partner_audio"></<audio>
      </div>

    <script src="https://cdn.jsdelivr.net/npm/@skyway-sdk/room/dist/skyway_room-latest.js"></script>
    <script src="{% static 'js/Guest_VideoChat.js' %}"></script>

      <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
      <script>
        function updateVideoStatus() {
            $.ajax({
                url: "{% url 'other_check_video_status' %}",
                type: "GET",
                dataType: "json",
                success: function(data) {
                    //$('#video_status').text(data.video_status);
                    if (data.video_status == 0) {
                      history.back(-1);
                    }
                }
            });
        }

        // 5秒ごとにビデオステータスをチェック
        setInterval(updateVideoStatus, 3000);

      </script>

  </body>
</html>
